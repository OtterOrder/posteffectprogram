#include	"DeferredLighting.h"

#include	"PostRenderer.h"

//------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------
DeferredLighting::DeferredLighting()
{
}

//------------------------------------------------------------------------------------------------------------------------------
DeferredLighting::~DeferredLighting()
{
}

//------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------
void DeferredLighting::Create (Vector2i _size)
{
	SetShader(NULL, NULL, "..\\Datas\\Shaders\\PSDeferredLighting.psh", "PSMain");
}

//------------------------------------------------------------------------------------------------------------------------------
void DeferredLighting::Release ()
{
}

//------------------------------------------------------------------------------------------------------------------------------
void DeferredLighting::Destroy ()
{
}

//------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------
void DeferredLighting::Apply()
{
	PostRenderer::GetSingleton()->SetRenderTarget(PostRenderer::GetSingleton()->GetFrontRenderSurface());

	m_pShader->Activate();
	m_pShader->SetPSSampler("DiffuseSampler", PostRenderer::GetSingleton()->GetGBuffer()->m_pRTSceneDiffuseMap.GetTexture());

	PostRenderer::GetSingleton()->DrawScreenQuad();
}