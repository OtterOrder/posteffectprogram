#include	"DefferedLighting.h"

#include	"PostRenderer.h"

//------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------
DefferedLighting::DefferedLighting()
{
}

//------------------------------------------------------------------------------------------------------------------------------
DefferedLighting::~DefferedLighting()
{
}

//------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------
void DefferedLighting::Create (Vector2i _size)
{
	SetShader(NULL, NULL, "..\\Datas\\Shaders\\PSDefferedLighting.psh", "PSMain");
}

//------------------------------------------------------------------------------------------------------------------------------
void DefferedLighting::Release ()
{
}

//------------------------------------------------------------------------------------------------------------------------------
void DefferedLighting::Destroy ()
{
}

//------------------------------------------------------------------------------------------------------------------------------
//------------------------------------------------------------------------------------------------------------------------------
void DefferedLighting::Apply()
{
	PostRenderer::GetSingleton()->SetRenderTarget(PostRenderer::GetSingleton()->GetFrontRenderSurface());

	m_pShader->Activate();
	m_pShader->SetPSSampler("DiffuseSampler", PostRenderer::GetSingleton()->GetGBuffer()->m_pRTSceneDiffuseMap.GetTexture());

	PostRenderer::GetSingleton()->DrawScreenQuad();
}